{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Your Habits</h2>
</div>

<div class="card p-3 shadow-sm mb-4">
    <form method="GET" class="row g-3">

        <div class="col-md-4">
            <input type="text" name="search" value="{{ search }}" 
                   class="form-control" placeholder="Search habits...">
        </div>

        <div class="col-md-4">
            <select name="category" class="form-select">
                <option value="">All Categories</option>
                <option value="health" {% if category == 'health' %}selected{% endif %}>Health</option>
                <option value="work" {% if category == 'work' %}selected{% endif %}>Work</option>
                <option value="learning" {% if category == 'learning' %}selected{% endif %}>Learning</option>
                <option value="personal" {% if category == 'personal' %}selected{% endif %}>Personal Development</option>
            </select>
        </div>

        <div class="col-md-3">
            <select name="sort" class="form-select">
                <option value="name" {% if sort_by == 'name' %}selected{% endif %}>Sort by Name</option>
                <option value="date" {% if sort_by == 'date' %}selected{% endif %}>Sort by Date</option>
                <option value="category" {% if sort_by == 'category' %}selected{% endif %}>Sort by Category</option>
            </select>
        </div>

        <div class="col-md-1">
            <button class="btn btn-dark w-100">Go</button>
        </div>

    </form>
</div>

<div class="row mt-4">
    {% if habits %}
        {% for habit in habits %}
        <div class="col-md-4">
            <div class="card shadow p-3 mb-4" style="border-radius: 12px;">

                <h4 class="mb-1">{{ habit.name }}</h4>

                <span class="badge bg-secondary">{{ habit.category }}</span>
                <p class="mt-2 mb-1"><strong>Frequency:</strong> {{ habit.frequency }}</p>
                <p class="mb-1"><strong>Start Date:</strong> {{ habit.start_date }}</p>
                <p class="mb-1"><strong>Streak:</strong> {{ habit.streak }} days</p>

                <a href="/{{ habit.id }}/" class="btn btn-outline-primary btn-sm mt-2 w-100">
                    View Habit
                </a>

            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="text-center mt-5">
            <h4 class="text-muted">No habits found</h4>
            <p>Add your first habit to get started!</p>
            <a href="/add/" class="btn btn-primary">+ Add Habit</a>
        </div>
    {% endif %}
</div>

{% endblock %}
